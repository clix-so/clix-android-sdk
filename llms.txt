<!-- repo: clix-so/clix-android-sdk -->
<!-- ref: main -->
<!-- commit: c51f46995092cddf120eb00d05e22c38f3e746a2 -->
<!-- generated_at: 2025-11-25T05:20:26Z -->
# Platform: Android

## /
- [Build.gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/build.gradle.kts): Top-level Gradle build script configuring shared Android/Kotlin/ktfmt/GMS plugins (without applying them) and enforcing a specific `commons-compress` version via the `classpath` configuration’s resolution strategy for all modules in the SDK.
- [Settings.gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/settings.gradle.kts): Defines Gradle plugin and dependency repositories, enforces centralized repository resolution, sets the root project name `clix-android-sdk`, and includes the `:clix` SDK module and `:samples:basic-app` sample app modules in the build.
- [Gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/gradle.properties): Defines project-wide Gradle configuration for the SDK, including JVM args, AndroidX usage, Kotlin code style, and non-transitive R class behavior that affects build performance, resource namespacing, and compatibility across all modules.
- [Readme](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/README.md): README for Clix Android SDK: explains initialization via Clix.initialize(ClixConfig), user/event APIs (setUserId/setUserProperty/trackEvent/getDeviceId), FCM push integration (Clix.
- [Changelog](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/CHANGELOG.md): Changelog enumerating v1.0.
- [License](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/LICENSE): Defines the SDK’s licensing terms as a modified MIT license, permitting use, modification, and distribution only when integrated with Clix services and requiring inclusion of copyright and permission notices in all substantial copies.

## clix
- [Build.gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/build.gradle.kts): Configures the `so.clix` Android library module’s Gradle build, including SDK/version settings, code style and static analysis (ktfmt, detekt), unit/instrumented test and Jacoco coverage setup, and Maven/JReleaser publication to Maven Central via the `release` variant.

## clix/src/main/kotlin/so/clix/core
- [Clixnotification](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/core/ClixNotification.kt): Singleton ClixNotification configures push behavior and handlers (configure, onMessage, onBackgroundMessage, onNotificationOpened, onFcmTokenError) and exposes token/permission APIs (getToken, deleteToken, requestPermission, getPermissionStatus, setPermissionGranted) while delegating to Clix.* services, launching coroutines, updating server, and starting activities to open landing URLs on taps.
- [Clixenvironment](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/core/ClixEnvironment.kt): Serializable internal ClixEnvironment constructs and serializes ClixDevice from Context/config/deviceId/token (collecting appVersion, advertising ID via reflection, push permission, timezone/locale), exposes synchronized getDevice/setDevice and companion helpers getAppVersion/getAdId/getIsPushPermissionGranted.
- [Clixconfig](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/core/ClixConfig.kt): Defines the serializable `ClixConfig` data class that centralizes SDK initialization settings (project ID, API key, API endpoint, `ClixLogLevel`, and extra HTTP headers) used to configure Clix network calls and logging behavior.
- [Clix](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/core/Clix.kt): Singleton SDK entrypoint that initializes Storage/Device/Token/Event/Notification services, fetches and upserts FCM tokens using coroutines, exposes Notification and APIs (initialize, set/remove userId, set/remove user properties, trackEvent, setLogLevel, getDeviceId), and logs errors.

## clix/src/main/kotlin/so/clix/models
- [Notificationcontext](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/NotificationContext.kt): Internal data class NotificationContext encapsulating notificationData: Map<String, Any?> and autoOpenLandingURL flag (default true), used by notification-handling flows to decide whether to auto-open landing URLs; module-internal.
- [Clixpushnotificationpayload](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixPushNotificationPayload.kt): Internal @Serializable ClixPushNotificationPayload data class modeling push payloads and exposing companion.decode(Map<String, Any?
- [Clixuserproperty](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixUserProperty.kt): Internal @Serializable data class ClixUserProperty models a typed user property and exposes companion of(name, value) that maps Boolean/Number/String (or formats dates via ClixDateFormatter) to a typed string value.
- [Clixdevice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixDevice.kt): Defines the internal `ClixDevice` @Serializable model encapsulating device, OS, locale, app, SDK, and push-notification identifiers/flags used for serialization in network payloads and other telemetry flows across the SDK.
- [Clixserverdevice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixServerDevice.kt): Defines the internal `ClixServerDevice` @Serializable DTO used to serialize device, app, locale, OS, SDK, and push-notification metadata (including optional ad ID and appVersion) for transmission to Clix backend services.

## clix/src/main/kotlin/so/clix/notification
- [Permissionactivity](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/notification/PermissionActivity.kt): Internal transparent PermissionActivity that requests POST_NOTIFICATIONS on Android TIRAMISU+, persists pending/result/timestamp in Clix.storageService to recover after restarts, exposes internal suspend requestPermission(context) which starts the activity, awaits result via a synchronized callback, and enforces a 5s timeout.
- [Clixmessagingservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/notification/ClixMessagingService.kt): Firebase MessagingService implementation that parses incoming RemoteMessage.data into ClixPushNotificationPayload and asynchronously invokes Clix.
- [Notificationtappedactivity](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/notification/NotificationTappedActivity.kt): Manifest-registered Activity that handles notification tap intents by extracting extras (messageId, landingUrl, journey IDs, autoHandleLandingURL, JSON data), deserializing data, and invoking ClixNotification.handleNotificationTapped (with NotificationContext and ClixPushNotificationPayload), then finishes.

## clix/src/main/kotlin/so/clix/services
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/NotificationService.kt): NotificationService (Context, StorageService, EventService) manages channels/permissions, deduplicates and shows push notifications (creates NotificationCompat notifications with optional remote image and PendingIntent to NotificationTappedActivity), tracks receive/tap events, and exposes handleNotificationReceived/tapped, requestNotificationPermission, preferences/reset.
- [Storageservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/StorageService.kt): Provides a type-safe JSON-backed wrapper around Android `SharedPreferences` for internal SDK persistence, exposing generic `set<T>`, `get<T>`, and `remove` APIs using Kotlinx Serialization with `ignoreUnknownKeys` and logging deserialization failures via `ClixLogger`.
- [Deviceservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/DeviceService.kt): Manages device identity, local storage, and remote device/user-property synchronization via DeviceAPIService using StorageService and Clix.environment—providing getCurrentDeviceId(), set/remove project userId, update/remove user properties, upsert token and push-permission; logs and handles network/serialization errors.
- [Tokenservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/TokenService.kt): Manages current and historical authentication tokens using `StorageService`, exposing methods to get the current token, retrieve up to 5 previous tokens, persist a new token (rotating history), and clear or reset all token-related entries.
- [Deviceapiservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/DeviceAPIService.kt): DeviceAPIService provides suspend REST client methods (post/delete via ClixAPIClient) to upsert devices, set a device's projectUserId, add/update or remove user properties—returning ClixServerDevice or projectUserId and serializing ClixDevice/ClixUserProperty to /devices and /devices/{id}/user/* endpoints.
- [Eventservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/EventService.kt): Internal service that converts arbitrary event properties to JSON primitives, builds `EventProperties`/`EventForRequest` payloads (including message/journey metadata and `Clix.environment.
- [Clixapiclient](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/ClixAPIClient.kt): Defines the internal `ClixAPIClient`, a JSON-configured (snake_case) HTTP wrapper around `HTTPClient` that builds `/api/v1` URLs from `Clix` environment config, injects default auth/identification headers, logs requests/responses, and exposes generic suspend `get`, `post`, `put`, and `delete` helpers.
- [Eventapiservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/EventAPIService.kt): Implements the `/events` tracking client, defining serializable `Event*` payload models and using the generic `ClixAPIClient.post<CreateEventsRequest, CreateEventsResponse>` flow to send batched device-scoped events (with message/journey metadata and custom JSON properties) to the backend.

## clix/src/main/kotlin/so/clix/utils
- [Clixerror](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/ClixError.kt): Defines the internal sealed `ClixError` exception hierarchy used across the SDK to represent initialization, configuration, network, encoding/decoding, permission, and unknown failures, standardizing error messages and propagation for Clix API flows.
- [Clixdateformatter](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/ClixDateFormatter.kt): Provides an internal date-time utility that normalizes various temporal types (`Date`, `Calendar`, `ZonedDateTime`, `LocalDateTime`, `LocalDate`, `Instant`) to `Instant` and formats them as ISO-8601 offset date-time strings using the system default `ZoneId`.

## clix/src/main/kotlin/so/clix/utils/http
- [Httprequest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPRequest.kt): Defines the internal generic `HTTPRequest<Req>` data model encapsulating URL, HTTP method, optional query/body params, headers, and request payload used by the SDK’s HTTP client utilities for constructing outbound network calls.
- [Httpresponse](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPResponse.kt): Defines the internal generic `HTTPResponse<Res>` data holder modeling an HTTP response, encapsulating parsed payload (`data`), status code, and raw header map for use by higher-level HTTP/networking utilities in the SDK.
- [Httpmethod](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPMethod.kt): Defines the internal `HTTPMethod` enum representing supported HTTP verbs (GET, POST, PUT, DELETE) used across the SDK’s HTTP utilities for request configuration and routing.
- [Httpclient](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPClient.kt): HTTPClient performs coroutine-based JSON HTTP calls (get/post/put/delete/request) via HttpURLConnection using kotlinx.serialization Json, builds query strings, supports ETag/response LRU caching, respects Retry-After delays, sets TrafficStats tag, logs via ClixLogger, and throws network/timeouts.

## clix/src/main/kotlin/so/clix/utils/logging
- [Clixloglevel](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/logging/ClixLogLevel.kt): Defines the `ClixLogLevel` enum (NONE, ERROR, WARN, INFO, DEBUG) used across the SDK to configure and control log verbosity for internal logging utilities.
- [Clixlogger](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/logging/ClixLogger.kt): Defines the internal `ClixLogger` singleton that centralizes SDK logging by mapping `ClixLogLevel`-filtered debug/info/warn/error calls to Android’s `Log` API under a fixed tag, with a synchronized `setLogLevel` entry point controlling global verbosity.

## clix/src/test/kotlin/so/clix/core
- [Clixtest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/core/ClixTest.kt): Robolectric+MockK unit tests for the Clix singleton that verify SDK initialization, logging, user property/event APIs, device/token retrieval (including exception handling) and coroutine-backed service calls by mocking Device/Event/Token/Notification services, NotificationManagerCompat, and ClixLogger.
- [Clixconfigtest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/core/ClixConfigTest.kt): JUnit test suite validating `ClixConfig` initialization behavior, ensuring required fields, default endpoint/log level, and optional overrides (custom endpoint, `ClixLogLevel`, extraHeaders) are correctly applied using `assertEquals` against expected configuration state.

## clix/src/test/kotlin/so/clix/models
- [Clixuserpropertytest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/models/ClixUserPropertyTest.kt): Unit tests for ClixUserProperty.of verifying conversion of various value types (String, Boolean, Number, Date/Calendar/Instant/ZonedDateTime/LocalDateTime/LocalDate and fallback) into ClixUserProperty with correct UserPropertyType and ISO_OFFSET_DATE_TIME (system zone) formatting.

## clix/src/test/kotlin/so/clix/services
- [Tokenservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/TokenServiceTest.kt): Robolectric-based unit tests for `TokenService`, validating its interaction with `StorageService` and SharedPreferences for managing current/previous tokens, including retrieval (`getCurrentToken`, `getPreviousTokens`), persistence (`saveToken` with max-5 history), and clearing/reset (`clearTokens`, `reset`).
- [Notificationservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/NotificationServiceTest.kt): Unit tests for NotificationService using Robolectric and MockK that verify handleNotificationTapped tracks PUSH_NOTIFICATION_TAPPED, setNotificationPreferences persists preferences conditional on NotificationManagerCompat.areNotificationsEnabled, and reset removes settings and calls NotificationManagerCompat.
- [Eventservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/EventServiceTest.kt): Robolectric/MockK-based unit tests for `EventService.trackEvent`, verifying that events are built with the `Clix.
- [Storageservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/StorageServiceTest.kt): Robolectric-based unit tests for `StorageService`, validating SharedPreferences-backed `set/get/remove` behavior for strings and `@Serializable` objects, null-handling (key removal), and graceful failure on invalid JSON deserialization using the `"clix_preferences"` store.

## clix/src/main
- [Androidmanifest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/AndroidManifest.xml): AndroidManifest declaring INTERNET and POST_NOTIFICATIONS permissions, registering non-exported ClixMessagingService (handles com.google.

## samples/basic-app
- [Build.gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/samples/basic-app/build.gradle.kts): Gradle Kotlin DSL for the basic-app sample that applies Android/Kotlin/Google plugins, configures namespace/compile/min/target SDKs, enables Jetpack Compose and Java/Kotlin targets, adds release ProGuard rules, and declares dependencies including project ':clix', Compose BOM/bundles, Activity Compose and Firebase Messaging.

## samples/basic-app/src/main
- [Androidmanifest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/samples/basic-app/src/main/AndroidManifest.xml): AndroidManifest for sample app (so.clix.
