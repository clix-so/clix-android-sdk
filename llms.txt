<!-- repo: clix-so/clix-android-sdk -->
<!-- ref: main -->
<!-- commit: 7a91757140d3ec99cb4e260733c9b0f36cce4987 -->
<!-- generated_at: 2025-11-17T07:50:46Z -->
# Platform: Android

## /
- [Build.gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/build.gradle.kts): Top-level Gradle build script configuring shared Android/Kotlin/ktfmt/GMS plugins (without applying them) and enforcing a specific `commons-compress` version via the `classpath` configuration’s resolution strategy for all modules in the SDK.
- [Settings.gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/settings.gradle.kts): Defines Gradle plugin and dependency repositories, enforces centralized repository resolution, sets the root project name `clix-android-sdk`, and includes the `:clix` SDK module and `:samples:basic-app` sample app modules in the build.
- [Gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/gradle.properties): Defines project-wide Gradle configuration for the SDK, including JVM args, AndroidX usage, Kotlin code style, and non-transitive R class behavior that affects build performance, resource namespacing, and compatibility across all modules.
- [Readme](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/README.md): README for the Clix Android SDK, documenting Gradle/Firebase setup, initialization (`Clix.initialize`/`ClixConfig`), user management (`setUserId`, `setUserProperties`), event tracking (`trackEvent`), state reset, logging, FCM push integration via `ClixMessagingService`, and Proguard considerations.
- [Changelog](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/CHANGELOG.md): CHANGELOG.md documents all SDK releases using Keep a Changelog and Semantic Versioning, detailing versioned additions, fixes, and behavior changes across core SDK initialization, user management, event tracking, push notifications, and device/logging features.
- [License](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/LICENSE): Defines the SDK’s licensing terms as a modified MIT license, permitting use, modification, and distribution only when integrated with Clix services and requiring inclusion of copyright and permission notices in all substantial copies.

## clix
- [Build.gradle](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/build.gradle.kts): Configures the `so.clix` Android library module’s Gradle build, including SDK/version settings, code style and static analysis (ktfmt, detekt), unit/instrumented test and Jacoco coverage setup, and Maven/JReleaser publication to Maven Central via the `release` variant.

## clix/src/main/kotlin/so/clix/core
- [Clixenvironment](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/core/ClixEnvironment.kt): Defines the serializable `ClixEnvironment` container that constructs and holds a synchronized `ClixDevice` snapshot (device/app/push context) using Android/Play Services APIs, with helper methods `getAppVersion`, `getAdId`, and `getIsPushPermissionGranted`.
- [Clixconfig](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/core/ClixConfig.kt): Defines the serializable `ClixConfig` data class that centralizes SDK initialization settings (project ID, API key, API endpoint, `ClixLogLevel`, and extra HTTP headers) used to configure Clix network calls and logging behavior.
- [Clix](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/core/Clix.kt): Defines the `Clix` singleton as the main SDK entry point, wiring core services (storage, device, token, event, notification), initializing environment and FCM token on app startup, and exposing safe public APIs for user identification, user properties, event tracking, logging, and...

## clix/src/main/kotlin/so/clix/models
- [Clixpushnotificationpayload](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixPushNotificationPayload.kt): Defines the internal `ClixPushNotificationPayload` serializable data model used to decode/encode push notification content (title, body, message/user journey identifiers, and optional landing/image URLs) for the Clix Android SDK’s notification handling flow.
- [Clixuserproperty](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixUserProperty.kt): Defines the internal `ClixUserProperty` serializable model and `UserPropertyType` enum, plus a factory `of(name: String, value: Any)` that normalizes booleans, numbers, strings, or date-like objects (via `ClixDateFormatter`) into a typed, string-backed user property for API payloads.
- [Clixdevice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixDevice.kt): Defines the internal `ClixDevice` @Serializable model encapsulating device, OS, locale, app, SDK, and push-notification identifiers/flags used for serialization in network payloads and other telemetry flows across the SDK.
- [Clixserverdevice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/models/ClixServerDevice.kt): Defines the internal `ClixServerDevice` @Serializable DTO used to serialize device, app, locale, OS, SDK, and push-notification metadata (including optional ad ID and appVersion) for transmission to Clix backend services.

## clix/src/main/kotlin/so/clix/notification
- [Clixmessagingservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/notification/ClixMessagingService.kt): FirebaseMessagingService implementation that logs incoming FCM messages, decodes the `clix` JSON payload into `ClixPushNotificationPayload` using kotlinx.serialization, forwards it to `Clix.
- [Notificationtappedactivity](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/notification/NotificationTappedActivity.kt): Handles notification tap intents by logging and forwarding message metadata to `Clix.notificationService.

## clix/src/main/kotlin/so/clix/services
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/NotificationService.kt): Implements Clix push notification handling, including channel setup, image loading, display logic (`handleNotificationReceived`), tap tracking (`handleNotificationTapped`), user preferences persistence (`setNotificationPreferences`/`reset`), permission checks, and event reporting via `EventService` and `StorageService`.
- [Storageservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/StorageService.kt): Provides a type-safe JSON-backed wrapper around Android `SharedPreferences` for internal SDK persistence, exposing generic `set<T>`, `get<T>`, and `remove` APIs using Kotlinx Serialization with `ignoreUnknownKeys` and logging deserialization failures via `ClixLogger`.
- [Deviceservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/DeviceService.kt): Manages device identity and server sync by persisting a UUID-based deviceId, mapping and updating user properties, registering/updating device push tokens via `DeviceAPIService`, and handling network/serialization errors while integrating with `Clix.environment` and `StorageService`.
- [Tokenservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/TokenService.kt): Manages current and historical authentication tokens using `StorageService`, exposing methods to get the current token, retrieve up to 5 previous tokens, persist a new token (rotating history), and clear or reset all token-related entries.
- [Deviceapiservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/DeviceAPIService.kt): Defines `DeviceAPIService`, a `ClixAPIClient`-based HTTP client for upserting devices, binding a project user ID, and updating user properties via `/devices` endpoints, using kotlinx-serialization request/response DTOs (`ClixDevice`, `ClixServerDevice`, `ClixUserProperty`).
- [Eventservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/EventService.kt): Internal service that converts arbitrary event properties to JSON primitives, builds `EventProperties`/`EventForRequest` payloads (including message/journey metadata and `Clix.environment.
- [Clixapiclient](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/ClixAPIClient.kt): Defines the internal `ClixAPIClient`, a JSON-configured (snake_case) HTTP wrapper around `HTTPClient` that builds `/api/v1` URLs from `Clix` environment config, injects default auth/identification headers, logs requests/responses, and exposes generic suspend `get`, `post`, `put`, and `delete` helpers.
- [Eventapiservice](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/services/EventAPIService.kt): Implements the `/events` tracking client, defining serializable `Event*` payload models and using the generic `ClixAPIClient.post<CreateEventsRequest, CreateEventsResponse>` flow to send batched device-scoped events (with message/journey metadata and custom JSON properties) to the backend.

## clix/src/main/kotlin/so/clix/utils
- [Clixerror](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/ClixError.kt): Defines the internal sealed `ClixError` exception hierarchy used across the SDK to represent initialization, configuration, network, encoding/decoding, permission, and unknown failures, standardizing error messages and propagation for Clix API flows.
- [Clixdateformatter](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/ClixDateFormatter.kt): Provides an internal date-time utility that normalizes various temporal types (`Date`, `Calendar`, `ZonedDateTime`, `LocalDateTime`, `LocalDate`, `Instant`) to `Instant` and formats them as ISO-8601 offset date-time strings using the system default `ZoneId`.

## clix/src/main/kotlin/so/clix/utils/http
- [Httprequest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPRequest.kt): Defines the internal generic `HTTPRequest<Req>` data model encapsulating URL, HTTP method, optional query/body params, headers, and request payload used by the SDK’s HTTP client utilities for constructing outbound network calls.
- [Httpresponse](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPResponse.kt): Defines the internal generic `HTTPResponse<Res>` data holder modeling an HTTP response, encapsulating parsed payload (`data`), status code, and raw header map for use by higher-level HTTP/networking utilities in the SDK.
- [Httpmethod](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPMethod.kt): Defines the internal `HTTPMethod` enum representing supported HTTP verbs (GET, POST, PUT, DELETE) used across the SDK’s HTTP utilities for request configuration and routing.
- [Httpclient](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/http/HTTPClient.kt): Defines the internal `HTTPClient` coroutine-based wrapper around `HttpURLConnection` that builds query URLs, sends JSON GET/POST/PUT/DELETE requests (`request`, `get`, `post`, `put`, `delete`), manages ETag-based response caching, `Retry-After` backoff, timeouts, and logging via `ClixLogger`.

## clix/src/main/kotlin/so/clix/utils/logging
- [Clixloglevel](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/logging/ClixLogLevel.kt): Defines the `ClixLogLevel` enum (NONE, ERROR, WARN, INFO, DEBUG) used across the SDK to configure and control log verbosity for internal logging utilities.
- [Clixlogger](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/main/kotlin/so/clix/utils/logging/ClixLogger.kt): Defines the internal `ClixLogger` singleton that centralizes SDK logging by mapping `ClixLogLevel`-filtered debug/info/warn/error calls to Android’s `Log` API under a fixed tag, with a synchronized `setLogLevel` entry point controlling global verbosity.

## clix/src/test/kotlin/so/clix/core
- [Clixtest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/core/ClixTest.kt): Robolectric-based unit tests for the `Clix` SDK facade, verifying initialization with `ClixConfig`, delegation to `DeviceService`, `EventService`, `TokenService`, and `NotificationService`, correct use of `ClixLogger` and `NotificationManagerCompat`, and error-handling for device ID/token accessors.
- [Clixconfigtest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/core/ClixConfigTest.kt): JUnit test suite validating `ClixConfig` initialization behavior, ensuring required fields, default endpoint/log level, and optional overrides (custom endpoint, `ClixLogLevel`, extraHeaders) are correctly applied using `assertEquals` against expected configuration state.

## clix/src/test/kotlin/so/clix/models
- [Clixuserpropertytest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/models/ClixUserPropertyTest.kt): JUnit tests validating `ClixUserProperty.of` type inference and valueString formatting for strings, booleans, numbers, multiple java.

## clix/src/test/kotlin/so/clix/services
- [Tokenservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/TokenServiceTest.kt): Robolectric-based unit tests for `TokenService`, validating its interaction with `StorageService` and SharedPreferences for managing current/previous tokens, including retrieval (`getCurrentToken`, `getPreviousTokens`), persistence (`saveToken` with max-5 history), and clearing/reset (`clearTokens`, `reset`).
- [Notificationservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/NotificationServiceTest.kt): Unit tests for `NotificationService`, verifying event tracking on notification taps, permission-aware preference persistence via `StorageService`, and reset behavior (including `NotificationManagerCompat.cancelAll()`), using Robolectric, MockK (including static mocking), and a mocked `EventService`.
- [Eventservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/EventServiceTest.kt): Robolectric/MockK-based unit tests for `EventService.trackEvent`, verifying that events are built with the `Clix.
- [Storageservicetest](https://raw.githubusercontent.com/clix-so/clix-android-sdk/main/clix/src/test/kotlin/so/clix/services/StorageServiceTest.kt): Robolectric-based unit tests for `StorageService`, validating SharedPreferences-backed `set/get/remove` behavior for strings and `@Serializable` objects, null-handling (key removal), and graceful failure on invalid JSON deserialization using the `"clix_preferences"` store.
